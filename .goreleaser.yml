##
## BUILDS
## 
builds:
##
## kushtakad
##
- id: kushtakad
  main: ./main.go
  binary: kushtakad
  goos:
    - darwin
    - linux
    - windows
  goarch:
    - amd64
  env:
    - GO111MODULE=on
    - CGO_ENABLED=0

##
## BEFORE
## 
before:
  hooks:
    - go mod download
    - packr2 clean
    - packr2
      
checksum:
  name_template: 'checksums.txt'

snapshot:
  name_template: "{{ .Tag }}-beta"

changelog:
  sort: asc

##
## ARCHIVES
##
archives:
  ##
  ## kushtakad
  ##
  - id: kushtakad
    builds:
    - kushtakad
    format: gz
    format_overrides:
      - goos: windows
        format: zip
    files:
    - none*

##
## SNAPS
##
snapcrafts:
  - id: kushtakad

    name: kushtakad
    summary: Kushtakad
    description: Kushtaka.org is a sustainable all-in-one honeypot and honeytoken orchestrator for under-resourced Blue Teams. 
    license: Apache-2.0
    publish: false
    grade: beta
    confinement: strict
    name_template: "{{ .ProjectName }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}"
    replacements:
      amd64: 64-bit
      darwin: macOS
      linux: Tux

    apps:
      set:
      sensor:
        plugs: ["network", "network-bind"]
        daemon: simple
        args: -sensor
      server:
        plugs: ["network", "network-bind"]
        daemon: simple
        args: -server

    #grade: edge
    #base: core18
    #confinement: classic